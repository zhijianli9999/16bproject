# Project Proposal

## Abstract
I propose to build a machine learning model that predicts the risk of water shortages (dry wells) in California, and visualize the predictions in an interactive map. Using data including but not limited to hydrological measurements (of, for example, groundwater levels), I hope to make better predictions of water shortages so farmers and residents can anticipate the risks. 

## Relationship to existing projects
The idea of evaluating water shortage risk is not new. In this section, I detail the existing work relevant to my proposed project.

In 2021, the California Department of Water Resources (DWR) released its [Drought and Water Shortage Risk Explorer](https://tableau.cnra.ca.gov/t/DWR_IntegratedDataAnalysisBranch/views/SmallWaterSystemRisk-March2021/Dashboard?%3Aembed=y&%3AisGuestRedirectFromVizportal=y), containing an interactive web app mapping out their risk assessment score of wells in the state. The main difference between this effort and my proposed project is that the DWR's risk assessment system is not a statistical model. Instead, it is a weighted average of risk "scores" obtained through "an extensive stakeholder participatory process", with the weights similarly determined via discussions. This scoring system is detailed in [Part 2 Appendix 1](https://water.ca.gov/-/media/DWR-Website/Web-Pages/Programs/Water-Use-And-Efficiency/Urban-Water-Use-Efficiency/CDAG/Part-2-Appendix-1-Scoring-Method-Final.pdf) of DWR's [Final Report](https://tableau.cnra.ca.gov/t/DWR_IntegratedDataAnalysisBranch/views/SmallWaterSystemRisk-March2021/methods?%3AshowAppBanner=false&%3Adisplay_count=n&%3AshowVizHome=n&%3Aorigin=viz_share_link&%3AisGuestRedirectFromVizportal=y&%3Aembed=y) regarding their efforts to satisfy Assembly Bill 1668, the legislation that prompted this project. Although the goals and methodology of the DWR's project differ drastically from mine, it incorporates an extensive list of risk factors which can help augment the input data for my model.

A second existing project that I came across is a study by Hussein et al. (2020)[^1]. The input data used were 174 monthly satellite images, along with 11 manually-selected hydrological features. The main machine learning task in this study is to extract features from images to predict the spatial distribution of groundwater. For my project, I will look to test out some of the machine learning methods used in this literature and try to incorporate the more granular data available in California.

[^1]: Hussein, Eslam A., Christopher Thron, Mehrdad Ghaziasgar, Antoine Bagula, and Mattia Vaccari. 2020. "Groundwater Prediction Using Machine-Learning Tools" Algorithms 13, no. 11: 300. https://doi.org/10.3390/a13110300

## Planned Deliverables
The most ambitious version of my project would consist of three main components. These are, starting from the user end, an interactive geographic visualization to explore the risk of water shortages, a machine learning model to predict water shortages, and a pipeline to gather up-to-date data on the risk factors. The core component would be the machine learning model, so a partial success would be to build a predictive model with inputs from multiple datasets. The output of the predictive model would be, for each well in the state of California, an estimated probability of water shortage, say, for the next six months. The visualization would display the risk calculations in an interactive map that displays the probability of failure along with information about the risk factors. Potentially, I would like to automatically update the model with periodically collected data, such as [seasonal groundwater level data](https://data.ca.gov/dataset/groundwater-level-seasonal-change-points) measured by the California Department of Water Resources, and other datasets from [data.ca.gov](data.ca.gov). In terms of tools, I plan to build the predictive model in a Jupyter notebook, and do the visualization in a web app.

## Resources Required
The project will require a few types of data. First, the event that I would like to predict is the occurrence of dry wells, so I would need the past occurrences documented in the [Household Water Supply Shortage Reporting System](https://data.ca.gov/dataset/household-water-supply-shortage-reporting-system-data). This dataset contains coordinates and dates of 3765 reports of water shortages in California from 2014 onwards. I also have [data on the universe of wells in California](https://data.ca.gov/dataset/periodic-groundwater-level-measurements), along with groundwater levels which the Department of Water Resources measures periodically. Data on [groundwater quality](https://data.ca.gov/dataset/ground-water-water-quality-results), the [proximity to rivers and lakes](https://data.ca.gov/dataset/national-hydrography-dataset-nhd/resource/cf158c1e-4864-4dd6-b8da-40eca73b522e) and climate data are all available and possibly relevant. If time permits, I will incorporate satellite image data following Hussein et al (2020).

## Tools and Skills Required
Most of the work fall under machine learning, used to solve our prediction problem, and visualization, for representing the predictions. I will look to use the functionalities in the TensorFlow package for the machine learning tasks. For the visualization component, I will use the Pyplot package. Depending on time and the complexity of the visualization task, I may use Flask to make a simple web app. These tools will develop my skills in building a machine learning pipeline, and the volume of data would necessitate some database management skills.

## Risks
It is possible that the hydrological data do not provide a strong enough signal for water shortages. Another risk is that the self-reported water shortage data is too incomplete and selected for meaningful, unbiased predictions.

## Ethics
The potential benefits to this project is significant. If it does help people and businesses assess when and where water shortages might occur, it could mitigate a big source of uncertainty in their lives. This relies on the assumption that the current residents and users of the water resources in question have an inadequate understanding of the risks of water shortages. For my project to be useful, it would have to outperform the risk assessments of local residents who have a much deeper understanding of local hydrological and geographic conditions than any dataset could provide me. A second assumption is that our training data, the water shortage reports, are relatively complete and unbiased. If the likelihood of reporting a water shortage is dependent on things like the level of trust in local government, then my dataset could be missing reports from precisely the most underserved populations. This may cause the risk assessments to understate the problem in some areas and provide a false sense of security for the residents and local leaders in these areas. However, on the flip side, a data-driven model might draw attention to risks that are currently being ignored by the current ratings system adopted by the state government. Something else to think about would be whether the project would be generalizable to regions where there is not a comprehensive hydrological survey system that provides these datasets. To mitigate this, I will try to test the robustness of the model to missing features.

## Tentative Timeline
After two weeks, I will look to create a database for the geographic variables and the groundwater measurement data, and code up a basic machine learning model. In four weeks, I will look to tune the model, possibly adding image data, and create a basic visualization. In six weeks, I will have a full machine learning pipeline, with interactive visualizations and some form of updating mechanism.
